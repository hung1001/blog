document.addEventListener("DOMContentLoaded",()=>{qsa("#HTML4 .widget-content",e=>{e.innerHTML+="<div class='upd'>Last updated : "+upd+"</div><div class='lb'>Applies to : "+label+"</div>"})}),window.addEventListener("load",()=>{let e;if(labelArray.length){var t,r,l;for(l=labelArray.length-1;0<l;l--)t=Math.floor(Math.random()*(l+1)),r=labelArray[l],labelArray[l]=labelArray[t],labelArray[t]=r;e=labelArray[0]}fetch(`/feeds/posts/summary?category=${e}&alt=json&max-results=0`).then(e=>e.json()).then(t=>{let r=t.feed.openSearch$totalResults.$t,l=[],a=[];for(let e=0;e<r;e++)l.push(e+1);var n=e=>{let t=e[Math.floor(Math.random()*e.length)];return function(e,t){for(let r=0;r<e.length;r++)if(e[r]==t)return!0;return!1}(a,t)?n(e):(a.push(t),t)};let s=r<num_post?r:num_post;var i=()=>{for(let t=1;1>=t;t++)fetch(`/feeds/posts/summary?category=${e}&alt=json&max-results=1&start-index=${n(l)}`).then(e=>e.json()).then(e=>{let t,r,a,n,d,h,o=[];for(let l=0;l<e.feed.entry.length;l++){for(let r=0;r<e.feed.entry[l].link.length;r++)if("alternate"===e.feed.entry[l].link[r].rel){t=e.feed.entry[l].link[r].href;break}for(let t=0;t<e.feed.entry[l].link.length;t++)r=e.feed.entry[l].title.$t;if(a="media$thumbnail"in e.feed.entry[l]?e.feed.entry[l].media$thumbnail.url.replace("s72-c","w479"):nth,d=e.feed.entry[l].author[0].name.$t,0!=(n=e.feed.entry[l].summary.$t).length&&(n=n.replace(/<\S[^>]*>/g,"")).length>180){let e=n.substring(0,180),t=e.lastIndexOf(" ");n=e.substring(0,t)+" ..."}h=e.feed.entry[l].published.$t.substring(0,10).replace(/-/gi,"/"),o.push({href:t,title:r,thumb:a,snippet:n,author:d,time:h})}let f="";for(let e=0;e<o.length;e++)o[e].href==url?l.length>s&&i():f+="<div class='item'><div class='thumb'><a href='"+o[e].href+"'><img src='"+o[e].thumb+"'/></a></div><div class='meta'><a title='"+o[e].title+"' href='"+o[e].href+"' class='title'>"+o[e].title+"</a><a class='author'>"+o[e].author+"</a><span class='published timeago'> - "+o[e].time+"</span><span class='snip'>"+o[e].snippet+"</span></div></div>";cl("_related")[0].innerHTML+=f}).catch(e=>console.error(e))};for(let e=0;e<s;e++)i()}).catch(e=>console.error(e))});